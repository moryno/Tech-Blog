{"ast":null,"code":"import _defineProperty from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14;import{useContext,useEffect,useState}from\"react\";import{Link,useParams}from\"react-router-dom\";import styled from\"styled-components\";import posts from\"../apis\";import{UserContext}from\"../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.section(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  flex: 9;\\n\"])));var Wrapper=styled.article(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 1.25rem;\\n  padding-right: 0;\\n  display: flex;\\n  flex-direction: column;\\n\"])));var Image=styled.img(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 25rem;\\n  border-radius: 0.3125rem;\\n  object-fit: cover;\\n\"])));var PostTitle=styled.h1(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  margin: 0.625rem;\\n  font-family: \\\"Lora\\\", serif;\\n  font-size: 1.625rem;\\n\"])));var PostEdit=styled.article(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  float: right;\\n  font-size: 1rem;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));var Icon=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  margin-left: 0.625rem;\\n  cursor: pointer;\\n  &:first-child {\\n    color: teal;\\n  }\\n  &:last-child {\\n    color: tomato;\\n  }\\n\"])));var PostInfo=styled.article(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  margin-bottom: 1.25rem;\\n  display: flex;\\n  justify-content: space-between;\\n  font-family: \\\"Varela Round\\\", sans-serif;\\n  font-size: 1rem;\\n  color: #b39656;\\n\"])));var PostAuthor=styled.span(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\"])));var AuthorName=styled.b(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n\"])));var Date=styled.span(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\"])));var Description=styled.p(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  color: #666;\\n  font-size: 1.125rem;\\n  line-height: 1.5;\\n  &::first-letter {\\n    margin-left: 1.25rem;\\n    font-size: 1.875rem;\\n    font-weight: 600;\\n  }\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));var Button=styled.button(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  width: 6.25rem;\\n  color: white;\\n  background-color: teal;\\n  border: none;\\n  border-radius: 0.3125rem;\\n  padding: 0.3125rem;\\n  cursor: pointer;\\n  margin-top: 1.25rem;\\n  align-self: flex-end;\\n\"])));var PostInput=styled.input(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  margin: 0.625rem;\\n  font-family: \\\"Lora\\\", serif;\\n  font-size: 1.625rem;\\n  border: none;\\n  border-bottom: 1px solid lightgray;\\n  color: grey;\\n  text-align: center;\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));var Content=styled.textarea(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  font-size: 1.125rem;\\n  line-height: 1.5;\\n  border: none;\\n  border-bottom: 1px solid lightgray;\\n  color: gray;\\n  text-align: center;\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));var Post=function Post(){var _useParams=useParams(),postId=_useParams.postId;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),updateMode=_useState4[0],setUpdateMode=_useState4[1];var _useContext=useContext(UserContext),user=_useContext.user;var _useState5=useState({title:\"\",desc:\"\"}),_useState6=_slicedToArray(_useState5,2),inputs=_useState6[0],setInputs=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$posts$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return posts.get(\"/posts/\".concat(postId));case 2:_yield$posts$get=_context.sent;data=_yield$posts$get.data;setPost(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[postId]);var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},name,value)));};var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return posts.patch(\"/posts/\".concat(postId),{author:user.username,title:inputs.title,desc:inputs.desc});case 3:window.location.reload();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleUpdate(){return _ref2.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return posts.delete(\"/posts/\".concat(postId));case 3:window.location.replace(\"/\");_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Image,{src:post.photo,alt:\"postImg\"}),updateMode?/*#__PURE__*/_jsx(PostInput,{onChange:handleChange,name:\"title\",value:inputs.title,placeholder:\"Title\"}):/*#__PURE__*/_jsxs(PostTitle,{children:[post.title,post.author===(user===null||user===void 0?void 0:user.username)&&/*#__PURE__*/_jsxs(PostEdit,{children:[/*#__PURE__*/_jsx(Icon,{children:/*#__PURE__*/_jsx(\"i\",{className:\"singlePostIcon far fa-edit\",onClick:function onClick(){return setUpdateMode(true);}})}),/*#__PURE__*/_jsx(Icon,{children:/*#__PURE__*/_jsx(\"i\",{className:\"singlePostIcon far fa-trash-alt\",onClick:handleDelete})})]})]}),/*#__PURE__*/_jsxs(PostInfo,{children:[/*#__PURE__*/_jsxs(PostAuthor,{children:[\"Author:\",/*#__PURE__*/_jsx(Link,{to:\"/?user=\".concat(post.author),children:/*#__PURE__*/_jsx(AuthorName,{children:post.author})})]}),/*#__PURE__*/_jsx(Date,{children:post.date})]}),updateMode?/*#__PURE__*/_jsx(Content,{onChange:handleChange,name:\"desc\",value:inputs.desc,placeholder:\"Content\"}):/*#__PURE__*/_jsx(Description,{children:post.desc}),updateMode&&/*#__PURE__*/_jsx(Button,{onClick:handleUpdate,children:\" Update \"})]})});};export default Post;","map":{"version":3,"names":["useContext","useEffect","useState","Link","useParams","styled","posts","UserContext","Container","section","Wrapper","article","Image","img","PostTitle","h1","PostEdit","Icon","div","PostInfo","PostAuthor","span","AuthorName","b","Date","Description","p","Button","button","PostInput","input","Content","textarea","Post","postId","post","setPost","updateMode","setUpdateMode","user","title","desc","inputs","setInputs","fetchData","get","data","handleChange","event","target","name","value","handleUpdate","patch","author","username","window","location","reload","console","log","handleDelete","delete","replace","photo","date"],"sources":["/home/moryno/Development/Project/phase-2/tech-blog/client/src/pages/Post.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport posts from \"../apis\";\nimport { UserContext } from \"../context/Context\";\n\nconst Container = styled.section`\n  flex: 9;\n`;\n\nconst Wrapper = styled.article`\n  padding: 1.25rem;\n  padding-right: 0;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Image = styled.img`\n  width: 100%;\n  height: 25rem;\n  border-radius: 0.3125rem;\n  object-fit: cover;\n`;\n\nconst PostTitle = styled.h1`\n  text-align: center;\n  margin: 0.625rem;\n  font-family: \"Lora\", serif;\n  font-size: 1.625rem;\n`;\n\nconst PostEdit = styled.article`\n  float: right;\n  font-size: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Icon = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 0.625rem;\n  cursor: pointer;\n  &:first-child {\n    color: teal;\n  }\n  &:last-child {\n    color: tomato;\n  }\n`;\n\nconst PostInfo = styled.article`\n  margin-bottom: 1.25rem;\n  display: flex;\n  justify-content: space-between;\n  font-family: \"Varela Round\", sans-serif;\n  font-size: 1rem;\n  color: #b39656;\n`;\n\nconst PostAuthor = styled.span``;\n\nconst AuthorName = styled.b`\n  cursor: pointer;\n`;\n\nconst Date = styled.span``;\n\nconst Description = styled.p`\n  color: #666;\n  font-size: 1.125rem;\n  line-height: 1.5;\n  &::first-letter {\n    margin-left: 1.25rem;\n    font-size: 1.875rem;\n    font-weight: 600;\n  }\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Button = styled.button`\n  width: 6.25rem;\n  color: white;\n  background-color: teal;\n  border: none;\n  border-radius: 0.3125rem;\n  padding: 0.3125rem;\n  cursor: pointer;\n  margin-top: 1.25rem;\n  align-self: flex-end;\n`;\n\nconst PostInput = styled.input`\n  margin: 0.625rem;\n  font-family: \"Lora\", serif;\n  font-size: 1.625rem;\n  border: none;\n  border-bottom: 1px solid lightgray;\n  color: grey;\n  text-align: center;\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Content = styled.textarea`\n  font-size: 1.125rem;\n  line-height: 1.5;\n  border: none;\n  border-bottom: 1px solid lightgray;\n  color: gray;\n  text-align: center;\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Post = () => {\n  const { postId } = useParams();\n  const [post, setPost] = useState({});\n  const [updateMode, setUpdateMode] = useState(false);\n  const { user } = useContext(UserContext);\n  const [inputs, setInputs] = useState({\n    title: \"\",\n    desc: \"\",\n  });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const { data } = await posts.get(`/posts/${postId}`);\n      setPost(data);\n    };\n    fetchData();\n  }, [postId]);\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setInputs({ ...inputs, [name]: value });\n  };\n  const handleUpdate = async () => {\n    try {\n      await posts.patch(`/posts/${postId}`, {\n        author: user.username,\n        title: inputs.title,\n        desc: inputs.desc,\n      });\n      window.location.reload();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await posts.delete(`/posts/${postId}`);\n      window.location.replace(\"/\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Container>\n      <Wrapper>\n        <Image src={post.photo} alt=\"postImg\" />\n        {updateMode ? (\n          <PostInput\n            onChange={handleChange}\n            name=\"title\"\n            value={inputs.title}\n            placeholder=\"Title\"\n          />\n        ) : (\n          <PostTitle>\n            {post.title}\n            {post.author === user?.username && (\n              <PostEdit>\n                <Icon>\n                  <i\n                    className=\"singlePostIcon far fa-edit\"\n                    onClick={() => setUpdateMode(true)}\n                  ></i>\n                </Icon>\n                <Icon>\n                  <i\n                    className=\"singlePostIcon far fa-trash-alt\"\n                    onClick={handleDelete}\n                  ></i>\n                </Icon>\n              </PostEdit>\n            )}\n          </PostTitle>\n        )}\n\n        <PostInfo>\n          <PostAuthor>\n            Author:\n            <Link to={`/?user=${post.author}`}>\n              <AuthorName>{post.author}</AuthorName>\n            </Link>\n          </PostAuthor>\n          <Date>{post.date}</Date>\n        </PostInfo>\n\n        {updateMode ? (\n          <Content\n            onChange={handleChange}\n            name=\"desc\"\n            value={inputs.desc}\n            placeholder=\"Content\"\n          />\n        ) : (\n          <Description>{post.desc}</Description>\n        )}\n        {updateMode && <Button onClick={handleUpdate}> Update </Button>}\n      </Wrapper>\n    </Container>\n  );\n};\n\nexport default Post;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}