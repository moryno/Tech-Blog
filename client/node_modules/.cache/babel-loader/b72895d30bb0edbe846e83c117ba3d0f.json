{"ast":null,"code":"import _regeneratorRuntime from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/home/moryno/Development/Project/phase-2/tech-blog/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12;import{useContext,useState}from\"react\";import styled from\"styled-components\";import users from\"../apis\";import Sidebar from\"../components/Sidebar\";import{UserContext}from\"../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.main(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n\"])));var Wrapper=styled.section(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  flex: 9;\\n  padding: 1.25rem;\\n\"])));var SettingTitle=styled.article(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n\"])));var UpdateTitle=styled.span(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-size: 1.875rem;\\n  margin-bottom: 1.25rem;\\n  color: lightcoral;\\n\"])));var DeleteTitle=styled.span(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  font-size: 0.75rem;\\n  color: red;\\n  cursor: pointer;\\n\"])));var SettingForm=styled.form(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n\"])));var Label=styled.label(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  font-size: 1.25rem;\\n  margin-top: 1.25rem;\\n\"])));var SettingProfile=styled.article(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  margin: 0.625rem 0;\\n\"])));var Image=styled.img(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  width: 4.375rem;\\n  height: 4.375rem;\\n  border-radius: 1.25rem;\\n  object-fit: cover;\\n\"])));var Icon=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  width: 1.5625rem;\\n  height: 1.5625rem;\\n  border-radius: 50%;\\n  background-color: lightcoral;\\n  color: white;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n  margin-left: 0.625rem;\\n\"])));var Input=styled.input(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  color: gray;\\n  margin: 0.625rem 0;\\n  height: 1.875rem;\\n  border: none;\\n  border-bottom: 1px solid lightgray;\\n  outline: none;\\n\"])));var Button=styled.button(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  width: 9.375rem;\\n  align-self: center;\\n  color: white;\\n  background-color: teal;\\n  border: none;\\n  border-radius: 0.625rem;\\n  padding: 0.625rem;\\n  cursor: pointer;\\n  margin-top: 1.25rem;\\n\"])));var Settings=function Settings(){var _useContext=useContext(UserContext),user=_useContext.user,dispatch=_useContext.dispatch;var _useState=useState({username:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),_useState2$=_useState2[0],username=_useState2$.username,email=_useState2$.email,password=_useState2$.password,setState=_useState2[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setState(function(state){return _objectSpread(_objectSpread({},state),{},_defineProperty({},name,value));});};var handleUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$users$patch,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"UPDATE_START\"});event.preventDefault();_context.prev=2;_context.next=5;return users.patch(\"/users/\".concat(user.id),{username:username,email:email,password:password});case 5:_yield$users$patch=_context.sent;data=_yield$users$patch.data;dispatch({type:\"UPDATE_SUCCESS\",payload:data});window.location.reload();_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);dispatch({type:\"UPDATE_FAILURE\"});case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function handleUpdate(_x){return _ref.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return users.delete(\"/users/\".concat(user.id));case 3:dispatch({type:\"LOGOUT\"});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();console.log(user);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(SettingTitle,{children:[/*#__PURE__*/_jsx(UpdateTitle,{children:\"Update Your Account\"}),/*#__PURE__*/_jsx(DeleteTitle,{onClick:handleDelete,children:\"Delete Account\"})]}),/*#__PURE__*/_jsxs(SettingForm,{onSubmit:handleUpdate,children:[/*#__PURE__*/_jsx(Label,{children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(SettingProfile,{children:[/*#__PURE__*/_jsx(Image,{src:user.profile,alt:\"profileImg\"}),/*#__PURE__*/_jsx(Label,{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(Icon,{children:/*#__PURE__*/_jsx(\"i\",{className:\"settingsPPIcon far fa-user-circle\"})})}),/*#__PURE__*/_jsx(Input,{type:\"file\",id:\"fileInput\",style:{display:\"none\"}})]}),/*#__PURE__*/_jsx(Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Input,{onChange:handleChange,type:\"text\",name:\"username\",value:username,placeholder:\"Username\"}),/*#__PURE__*/_jsx(Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{onChange:handleChange,type:\"email\",name:\"email\",value:email,placeholder:\"email@email.com\"}),/*#__PURE__*/_jsx(Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Input,{onChange:handleChange,type:\"password\",name:\"password\",value:password}),/*#__PURE__*/_jsx(Button,{children:\"Update\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{})]});};export default Settings;","map":{"version":3,"names":["useContext","useState","styled","users","Sidebar","UserContext","Container","main","Wrapper","section","SettingTitle","article","UpdateTitle","span","DeleteTitle","SettingForm","form","Label","label","SettingProfile","Image","img","Icon","div","Input","input","Button","button","Settings","user","dispatch","username","email","password","setState","handleChange","event","target","name","value","state","handleUpdate","type","preventDefault","patch","id","data","payload","window","location","reload","handleDelete","delete","console","log","profile","display"],"sources":["/home/moryno/Development/Project/phase-2/tech-blog/client/src/pages/Settings.js"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport styled from \"styled-components\";\nimport users from \"../apis\";\nimport Sidebar from \"../components/Sidebar\";\nimport { UserContext } from \"../context/Context\";\n\nconst Container = styled.main`\n  display: flex;\n`;\n\nconst Wrapper = styled.section`\n  flex: 9;\n  padding: 1.25rem;\n`;\n\nconst SettingTitle = styled.article`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst UpdateTitle = styled.span`\n  font-size: 1.875rem;\n  margin-bottom: 1.25rem;\n  color: lightcoral;\n`;\n\nconst DeleteTitle = styled.span`\n  font-size: 0.75rem;\n  color: red;\n  cursor: pointer;\n`;\n\nconst SettingForm = styled.form`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Label = styled.label`\n  font-size: 1.25rem;\n  margin-top: 1.25rem;\n`;\n\nconst SettingProfile = styled.article`\n  display: flex;\n  align-items: center;\n  margin: 0.625rem 0;\n`;\n\nconst Image = styled.img`\n  width: 4.375rem;\n  height: 4.375rem;\n  border-radius: 1.25rem;\n  object-fit: cover;\n`;\n\nconst Icon = styled.div`\n  width: 1.5625rem;\n  height: 1.5625rem;\n  border-radius: 50%;\n  background-color: lightcoral;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  margin-left: 0.625rem;\n`;\n\nconst Input = styled.input`\n  color: gray;\n  margin: 0.625rem 0;\n  height: 1.875rem;\n  border: none;\n  border-bottom: 1px solid lightgray;\n  outline: none;\n`;\n\nconst Button = styled.button`\n  width: 9.375rem;\n  align-self: center;\n  color: white;\n  background-color: teal;\n  border: none;\n  border-radius: 0.625rem;\n  padding: 0.625rem;\n  cursor: pointer;\n  margin-top: 1.25rem;\n`;\n\nconst Settings = () => {\n  const { user, dispatch } = useContext(UserContext);\n  const [{ username, email, password }, setState] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setState((state) => ({ ...state, [name]: value }));\n  };\n\n  const handleUpdate = async (event) => {\n    dispatch({ type: \"UPDATE_START\" });\n    event.preventDefault();\n    try {\n      const { data } = await users.patch(`/users/${user.id}`, {\n        username,\n        email,\n        password,\n      });\n      dispatch({ type: \"UPDATE_SUCCESS\", payload: data });\n      window.location.reload();\n    } catch (error) {\n      dispatch({ type: \"UPDATE_FAILURE\" });\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await users.delete(`/users/${user.id}`);\n      dispatch({ type: \"LOGOUT\" });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  console.log(user);\n  return (\n    <Container>\n      <Wrapper>\n        <SettingTitle>\n          <UpdateTitle>Update Your Account</UpdateTitle>\n          <DeleteTitle onClick={handleDelete}>Delete Account</DeleteTitle>\n        </SettingTitle>\n        <SettingForm onSubmit={handleUpdate}>\n          <Label>Profile Picture</Label>\n          <SettingProfile>\n            <Image src={user.profile} alt=\"profileImg\" />\n            <Label htmlFor=\"fileInput\">\n              <Icon>\n                <i className=\"settingsPPIcon far fa-user-circle\"></i>\n              </Icon>\n            </Label>\n            <Input type={\"file\"} id=\"fileInput\" style={{ display: \"none\" }} />\n          </SettingProfile>\n          <Label>Username</Label>\n          <Input\n            onChange={handleChange}\n            type={\"text\"}\n            name=\"username\"\n            value={username}\n            placeholder=\"Username\"\n          />\n          <Label>Email</Label>\n          <Input\n            onChange={handleChange}\n            type={\"email\"}\n            name=\"email\"\n            value={email}\n            placeholder=\"email@email.com\"\n          />\n          <Label>Password</Label>\n          <Input\n            onChange={handleChange}\n            type={\"password\"}\n            name=\"password\"\n            value={password}\n          />\n          <Button>Update</Button>\n        </SettingForm>\n      </Wrapper>\n      <Sidebar />\n    </Container>\n  );\n};\n\nexport default Settings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}